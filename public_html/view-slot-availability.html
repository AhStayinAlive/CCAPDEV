<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lab Slot Availability</title>
<link rel="stylesheet" href="view-slot-availability.css">
</head>
<body>
<header>
    <h1>DLSU Lab Reservation System</h1>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="view-slot-availability.html">View Slot Availability</a></li>
			<li><a href="see-reservations.html">See Reservations</a></li>
            <li><a href="edit-reservation.html">Edit Reservation</a></li>
            <li><a href="remove-reservation.html">Remove Reservation</a></li>
            <li><a href="user-profile.html">User Profile Actions</a></li>
        </ul>
    </nav>
    <div class="user-info">
        <span>Currently Logged in As: <strong><span id="loggedInUser">Pierre Ramos</span></strong></span><br>
        <span>Account Type: <strong><span id="accountType">Lab Technician</span></strong></span>
    </div>
</header>
<div class="booking-container">
    <h2>View Lab Slot Availabilities</h2>
    
    <div class="lab-selector">
        <label for="lab-dropdown">Choose a lab:</label>
        <select id="lab-dropdown">
        </select>
    </div>
    
    <div class="date-selector">
        <button id="prev-date" onclick="changeDate(-1)">&lt; Previous Day</button>
        <span id="selected-date"></span>
        <button id="next-date" onclick="changeDate(1)">Next Day &gt;</button>
    </div>
    
    <div id="time-slots-container">
    </div>
</div>

<script>
    const selectedDateElement = document.getElementById('selected-date');
    let currentDate = new Date();

    function clearSearch() {
        document.getElementById('search-box').value = '';
        filterSlots(); 
    }
    function updateSelectedDate() {
        selectedDateElement.textContent = currentDate.toDateString();
        createLabs(3);
    }

    function changeDate(days) {
        currentDate.setDate(currentDate.getDate() + days);
        updateSelectedDate();
    }

    function createTimeSlots(labNumber) {
        const slotsContainer = document.createElement('div');
        slotsContainer.className = 'slots';
        for (let hour = 9; hour <= 17; hour++) {
            for (let mins = 0; mins < 60; mins += 30) {
                const timeSlotRow = document.createElement('div');
                timeSlotRow.className = 'time-slot-row';

                const timeLabel = document.createElement('span');
                timeLabel.className = 'time-label';
                timeLabel.textContent = `${hour}:${mins === 0 ? '00' : mins} ${hour >= 12 ? 'PM' : 'AM'}`;

                timeSlotRow.appendChild(timeLabel);

                for (let seat = 1; seat <= 10; seat++) {
                    const seatDiv = document.createElement('div');
                    seatDiv.className = 'seat available';
                    seatDiv.textContent = seat; // Display seat number
                    seatDiv.onmouseover = function() { this.className = 'seat hover'; };
                    seatDiv.onmouseout = function() { this.className = 'seat available'; };
                    timeSlotRow.appendChild(seatDiv);
                }

                slotsContainer.appendChild(timeSlotRow);
            }
        }
        return slotsContainer;
    }
    
    function createLabs() {
		const numberOfSeats = 10; 
		const timeSlotsContainer = document.getElementById('time-slots-container');
		timeSlotsContainer.innerHTML = ''; 

		const table = document.createElement('table');
		table.className = 'time-slots-table';

		const headerRow = document.createElement('tr');
		const timeHeader = document.createElement('th');
		timeHeader.textContent = 'Time';
		headerRow.appendChild(timeHeader);

		for (let i = 1; i <= numberOfSeats; i++) {
			const seatHeader = document.createElement('th');
			seatHeader.textContent = `Seat ${i}`;
			headerRow.appendChild(seatHeader);
		}
		table.appendChild(headerRow);

		for (let hour = 9; hour <= 17; hour++) {
			for (let mins = 0; mins < 60; mins += 30) {
				const row = document.createElement('tr');
				const timeSlot = document.createElement('td');
				timeSlot.textContent = `${hour % 12 === 0 ? 12 : hour % 12}:${mins === 0 ? '00' : mins}${hour >= 12 ? ' PM' : ' AM'}`;
				row.appendChild(timeSlot);

				for (let j = 1; j <= numberOfSeats; j++) {
					const seatSlot = document.createElement('td');
					seatSlot.className = 'seat-slot available';
					seatSlot.addEventListener('click', function() {
						// Redirect to make-reservation.html
						window.location.href = 'make-reservation.html';
					});
					row.appendChild(seatSlot);
				}
				table.appendChild(row);
			}
		}

		timeSlotsContainer.appendChild(table);
	}

    function populateLabDropdown() {
        const select = document.getElementById('lab-dropdown');
        for (let i = 1; i <= 3; i++) {
            const option = document.createElement('option');
            option.value = i;
            option.textContent = `Lab ${i}`;
            select.appendChild(option);
        }
    }

    document.getElementById('lab-dropdown').addEventListener('change', createLabs);

    populateLabDropdown();
    updateSelectedDate();
    createLabs(1); // Initialize the page with the first lab's time slots
</script>

</body>
</html>