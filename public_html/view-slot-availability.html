<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lab Slot Availability</title>
<link rel="stylesheet" href="view-slot-availability.css">
</head>
<body>
<header>
    <h1>DLSU Lab Reservation System</h1>
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="view-slot-availability.html">View Slot Availability</a></li>
            <li><a href="make-reservation.html">Make a Reservation</a></li>
            <li><a href="edit-reservation.html">Edit Reservation</a></li>
            <li><a href="see-reservations.html">See Reservations</a></li>
            <li><a href="remove-reservation.html">Remove Reservation</a></li>
            <li><a href="user-profile.html">User Profile Actions</a></li>
        </ul>
    </nav>
    <div class="user-info">
        <span>Currently Logged in As: <strong><span id="loggedInUser">Pierre Ramos</span></strong></span><br>
        <span>Account Type: <strong><span id="accountType">Lab Technician</span></strong></span>
    </div>
  </header>
<div class="booking-container">
    <h2>View Lab Slot Availabilities</h2>
    
    <div class="filter-container">
        <input type="text" id="search-box" placeholder="Search for a time slot or day..." oninput="filterSlots()">
        <button onclick="clearSearch()">Clear Search</button>
    </div>

    <div class="date-selector">
        <button id="prev-date" onclick="changeDate(-1)">&lt; Previous Day</button>
        <span id="selected-date"></span>
        <button id="next-date" onclick="changeDate(1)">Next Day &gt;</button>
    </div>
    
    <div id="labs-container">
    </div>
</div>

<script>
    const selectedDateElement = document.getElementById('selected-date');
    let currentDate = new Date();
    
    function filterSlots() {
        const searchValue = document.getElementById('search-box').value.toLowerCase();
        const slots = document.getElementsByClassName('slot');
        for (let slot of slots) {
            const timeText = slot.querySelector('.time').textContent.toLowerCase();
            if (timeText.includes(searchValue) || currentDate.toDateString().toLowerCase().includes(searchValue)) {
                slot.style.display = 'flex';
            } else {
                slot.style.display = 'none';
            }
        }
    }

    function clearSearch() {
        document.getElementById('search-box').value = '';
        filterSlots(); 
    }
    function updateSelectedDate() {
        selectedDateElement.textContent = currentDate.toDateString();
        createLabs(3);
    }

    function changeDate(days) {
        currentDate.setDate(currentDate.getDate() + days);
        updateSelectedDate();
    }

    function createTimeSlots() {
        const slotsContainer = document.createElement('div');
        slotsContainer.className = 'slots';
        for (let hour = 7; hour <= 22; hour++) { 
            const slot = document.createElement('div');
            slot.className = 'slot';
            
            const time = document.createElement('span');
            time.className = 'time';
            time.textContent = `${hour > 12 ? hour - 12 : hour}:00${hour >= 12 ? 'pm' : 'am'}`;
            
            const availability = document.createElement('span');
            availability.className = 'availability available';
            availability.onmouseover = function() { this.style.backgroundColor = 'red'; };
            availability.onmouseout = function() { this.style.backgroundColor = 'green'; };
            
            slot.appendChild(time);
            slot.appendChild(availability);
            slotsContainer.appendChild(slot);
        }
        return slotsContainer;
    }
    
    function createLabs(numberOfLabs) {
        const labsContainer = document.getElementById('labs-container');
        labsContainer.innerHTML = ''; 
        for (let i = 1; i <= numberOfLabs; i++) {
            const lab = document.createElement('div');
            lab.className = 'lab';
            
            const labTitle = document.createElement('h3');
            labTitle.textContent = `Lab ${i}`;
            
            lab.appendChild(labTitle);
            lab.appendChild(createTimeSlots());
            labsContainer.appendChild(lab);
        }
    }
    
    updateSelectedDate();
</script>

</body>
</html>
